<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mission Briefing - Deep Sea AR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        background-color: #000;
        color: white;
        overflow-x: hidden;
      }

      /* The Deep Sea Gradient */
      .ocean-container {
        background: linear-gradient(
          180deg,
          #2c7da0 0%,
          #014f86 15%,
          #012a4a 30%,
          #000000 60%,
          #000000 100%
        );
        min-height: 320vh;
        position: relative;
        padding-bottom: 150px;
      }

      .particle {
        position: absolute;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        animation: floatUp linear infinite;
      }
      @keyframes floatUp {
        from {
          transform: translateY(100vh);
          opacity: 0;
        }
        50% {
          opacity: 0.3;
        }
        to {
          transform: translateY(-10vh);
          opacity: 0;
        }
      }

      .creature-card {
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(5px);
        border: 1px solid rgba(79, 195, 247, 0.3);
        border-radius: 15px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 140px;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: absolute;
        cursor: pointer;
        z-index: 20; /* Ensure above ruler */
      }
      .creature-card:hover {
        transform: scale(1.15);
        background: rgba(2, 136, 209, 0.3);
        z-index: 30;
        box-shadow: 0 0 25px rgba(2, 136, 209, 0.5);
      }
      .creature-img {
        width: 100px;
        height: 100px;
        object-fit: contain;
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.2));
      }
      .creature-card h3 {
        margin-top: 0.5rem;
        line-height: 1.2;
      }

      /* Target Badge */
      .target-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #ef4444;
        color: white;
        font-size: 9px;
        font-weight: 800;
        padding: 2px 6px;
        border-radius: 4px;
        box-shadow: 0 0 5px rgba(239, 68, 68, 0.6);
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.8;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .depth-ruler {
        position: absolute;
        left: 20px;
        top: 0;
        bottom: 0;
        width: 1px;
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.5),
          rgba(255, 255, 255, 0.1)
        );
        z-index: 5;
      }
      .depth-marker {
        position: absolute;
        left: 10px;
        font-size: 11px;
        color: rgba(255, 255, 255, 0.6);
        display: flex;
        align-items: center;
        white-space: nowrap;
        font-family: monospace;
      }
      .depth-marker::before {
        content: "";
        width: 8px;
        height: 1px;
        background: rgba(255, 255, 255, 0.5);
        margin-right: 8px;
        margin-left: -9px;
      }

      .zone-label {
        position: absolute;
        right: 20px;
        text-align: right;
        font-weight: 800;
        font-size: 1.8rem;
        opacity: 0.15;
        text-transform: uppercase;
        pointer-events: none;
        letter-spacing: 0.1em;
        z-index: 1;
      }

      .intro-text {
        animation: fadeIn 2s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      #infoModal {
        transition: opacity 0.3s ease;
      }
      .modal-content {
        background: rgba(10, 10, 20, 0.95);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(56, 189, 248, 0.3);
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
      }

      /* Deploy Button at bottom */
      .deploy-section {
        position: absolute;
        bottom: 50px;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 20;
      }

      .btn-deploy {
        background: rgba(14, 165, 233, 0.2);
        border: 2px solid #0ea5e9;
        color: #e0f2fe;
        padding: 15px 40px;
        font-size: 1.2rem;
        font-weight: 700;
        letter-spacing: 2px;
        border-radius: 50px;
        box-shadow: 0 0 20px rgba(14, 165, 233, 0.4);
        transition: all 0.3s ease;
        text-transform: uppercase;
        backdrop-filter: blur(5px);
        text-align: center;
      }
      .btn-deploy:hover {
        background: #0ea5e9;
        color: white;
        box-shadow: 0 0 40px rgba(14, 165, 233, 0.8);
        transform: scale(1.05);
      }

      /* --- MOBILE RESPONSIVENESS FIXES --- */
      @media (max-width: 640px) {
        .ocean-container {
          /* Increase height significantly to spread cards out vertically */
          min-height: 420vh;
        }

        .creature-card {
          width: 120px; /* Smaller card */
          padding: 8px;
        }
        .creature-img {
          width: 80px;
          height: 80px;
        }
        .creature-card h3 {
          font-size: 0.75rem; /* Smaller text */
        }
        .creature-card p {
          font-size: 0.6rem;
        }

        .zone-label {
          font-size: 1.2rem; /* Reduce background text size */
          right: 10px;
        }

        /* Safer Horizontal Positioning for Mobile */
        /* Left aligned cards - push them right to avoid the depth ruler */
        .pos-left {
          left: 55px !important;
        }
        /* Right aligned cards - keep them safe from screen edge */
        .pos-right {
          right: 15px !important;
          left: auto !important;
        }
        /* Center aligned cards */
        .pos-center {
          left: 50% !important;
          transform: translateX(-50%) !important;
        }

        .btn-deploy {
          padding: 12px 20px;
          font-size: 0.9rem;
          width: 90%;
          max-width: 300px;
        }
      }
    </style>
  </head>
  <body>
    <audio id="clickSound" src="button.mp3"></audio>

    <a
      href="../index.html"
      class="fixed top-6 left-6 z-50 w-12 h-12 flex items-center justify-center rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white hover:bg-white/20 hover:scale-110 transition-all duration-300 shadow-[0_0_15px_rgba(0,0,0,0.5)] group"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 group-hover:-translate-x-1 transition-transform"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7m0 0l7-7m-7 7h18"
        />
      </svg>
    </a>

    <button
      id="langSwitch"
      class="fixed top-6 right-6 z-50 px-5 py-2 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white shadow-lg hover:bg-white/20 hover:scale-105 transition-all duration-300 font-bold tracking-wider text-sm flex items-center gap-2"
    >
      üåê EN
    </button>

    <!-- Info Modal -->
    <div
      id="infoModal"
      class="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 opacity-0 pointer-events-none p-4"
    >
      <div
        class="modal-content relative w-full max-w-sm rounded-2xl p-6 text-center transform scale-95 transition-transform duration-300 overflow-y-auto max-h-[90vh]"
      >
        <button
          id="closeModal"
          class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl"
        >
          &times;
        </button>
        <img
          id="modalImg"
          src=""
          class="w-24 h-24 mx-auto object-contain mb-2 filter drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]"
        />
        <h2
          id="modalTitle"
          class="text-2xl font-bold text-sky-400 mb-1 tracking-widest uppercase"
        >
          Creature Name
        </h2>
        <p
          id="modalDepth"
          class="text-xs text-gray-500 mb-4 tracking-wider uppercase"
        >
          Depth Info
        </p>

        <div
          class="bg-blue-950/50 p-3 rounded-lg mb-3 border-l-2 border-blue-500 text-left"
        >
          <h4
            class="text-blue-400 text-[10px] font-bold uppercase mb-1"
            data-key="ZoneInfo"
          >
            ZONE CONTEXT
          </h4>
          <p
            id="modalZone"
            class="text-xs text-gray-300 italic leading-relaxed"
          >
            Zone details...
          </p>
        </div>

        <div class="text-left bg-white/5 p-4 rounded-xl border border-white/5">
          <h4
            class="text-sky-300 text-xs font-bold mb-3 uppercase tracking-wide flex items-center gap-2"
          >
            <span class="text-lg">üß¨</span>
            <span data-key="SurvivalStrategy">Survival Strategy</span>
          </h4>
          <div
            id="modalFacts"
            class="text-xs text-gray-300 space-y-3 font-light leading-relaxed"
          ></div>
        </div>
      </div>
    </div>

    <!-- Main Scroll Container -->
    <div class="ocean-container" id="ocean">
      <div
        class="absolute top-20 left-0 w-full text-center px-6 intro-text z-10"
      >
        <h1
          data-key="MainTitle"
          class="text-2xl font-bold text-white mb-2 tracking-widest uppercase"
        >
          Mission Briefing
        </h1>
        <p
          class="text-xs text-blue-200 max-w-md mx-auto leading-relaxed"
          data-key="IntroText"
        >
          Identify your targets in the zones below before deploying the scanner.
          Scroll down to the abyss.
        </p>
        <div class="mt-4 animate-bounce text-blue-300 text-xl">‚Üì</div>
      </div>

      <div class="depth-ruler">
        <div class="depth-marker" style="top: 0%">0m</div>
        <div class="depth-marker" style="top: 10%">200m</div>
        <div class="depth-marker" style="top: 35%">1,000m</div>
        <div class="depth-marker" style="top: 70%">4,000m</div>
        <div class="depth-marker" style="top: 90%">6,000m+</div>
      </div>

      <div class="zone-label" style="top: 2%" data-key="SunlightLabel">
        Sunlight
      </div>
      <div class="zone-label" style="top: 15%" data-key="TwilightLabel">
        Twilight
      </div>
      <div class="zone-label" style="top: 45%" data-key="MidnightLabel">
        Midnight
      </div>
      <div class="zone-label" style="top: 80%" data-key="AbyssLabel">
        The Abyss
      </div>

      <!-- Creatures with Target Badges + Added pos-X classes for mobile safety -->
      <div
        class="creature-card pos-center"
        style="top: 8%; left: 50%; transform: translateX(-50%)"
        onclick="openCreature('Sea Angel', 'sunlight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/j.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Sea Angel">
          Sea Angel
        </h3>
        <p class="text-[10px] text-gray-400">0 - 350m</p>
      </div>

      <div
        class="creature-card pos-left"
        style="top: 18%; left: 20%"
        onclick="openCreature('Megamouth Shark', 'twilight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/h.png" class="creature-img" />
        <h3
          class="font-bold text-sm mt-2 text-sky-200"
          data-key="Megamouth Shark"
        >
          Megamouth Shark
        </h3>
        <p class="text-[10px] text-gray-400">150 - 1000m</p>
      </div>

      <div
        class="creature-card pos-right"
        style="top: 25%; right: 15%"
        onclick="openCreature('Barreleye', 'twilight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/a.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Barreleye">
          Barreleye
        </h3>
        <p class="text-[10px] text-gray-400">600 - 800m</p>
      </div>

      <div
        class="creature-card pos-left"
        style="top: 32%; left: 35%"
        onclick="openCreature('Vampire Squid', 'twilight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/g.png" class="creature-img" />
        <h3
          class="font-bold text-sm mt-2 text-sky-200"
          data-key="Vampire Squid"
        >
          Vampire Squid
        </h3>
        <p class="text-[10px] text-gray-400">600 - 900m</p>
      </div>

      <div
        class="creature-card pos-right"
        style="top: 45%; right: 20%"
        onclick="openCreature('Blobfish', 'midnight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/b.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Blobfish">
          Blobfish
        </h3>
        <p class="text-[10px] text-gray-400">600 - 1200m</p>
      </div>

      <div
        class="creature-card pos-left"
        style="top: 52%; left: 15%"
        onclick="openCreature('Atolla Jellyfish', 'midnight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/c.png" class="creature-img" />
        <h3
          class="font-bold text-sm mt-2 text-sky-200"
          data-key="Atolla Jellyfish"
        >
          Atolla Jellyfish
        </h3>
        <p class="text-[10px] text-gray-400">1000 - 4000m</p>
      </div>

      <div
        class="creature-card pos-right"
        style="top: 60%; right: 10%"
        onclick="openCreature('Anglerfish', 'midnight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/i.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Anglerfish">
          Anglerfish
        </h3>
        <p class="text-[10px] text-gray-400">1000 - 4000m</p>
      </div>

      <div
        class="creature-card pos-left"
        style="top: 68%; left: 45%"
        onclick="openCreature('Gulper Eel', 'midnight')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/e.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Gulper Eel">
          Gulper Eel
        </h3>
        <p class="text-[10px] text-gray-400">500 - 3000m</p>
      </div>

      <div
        class="creature-card pos-left"
        style="top: 82%; left: 20%"
        onclick="openCreature('Dumbo Octopus', 'abyss')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/d.png" class="creature-img" />
        <h3
          class="font-bold text-sm mt-2 text-sky-200"
          data-key="Dumbo Octopus"
        >
          Dumbo Octopus
        </h3>
        <p class="text-[10px] text-gray-400">3000 - 7000m</p>
      </div>

      <div
        class="creature-card pos-right"
        style="top: 90%; right: 25%"
        onclick="openCreature('Yeti Crab', 'abyss')"
      >
        <div class="target-badge">TARGET</div>
        <img src="../assets/images/f.png" class="creature-img" />
        <h3 class="font-bold text-sm mt-2 text-sky-200" data-key="Yeti Crab">
          Yeti Crab
        </h3>
        <p class="text-[10px] text-gray-400">2200m+</p>
      </div>

      <!-- DEPLOY BUTTON SECTION -->
      <div class="deploy-section">
        <button id="btnDeploy" class="btn-deploy">START AR SCAN</button>
      </div>
    </div>

    <script>
      // 1. Generate Bubbles
      const ocean = document.getElementById("ocean");
      for (let i = 0; i < 40; i++) {
        const b = document.createElement("div");
        b.className = "particle";
        const size = Math.random() * 8 + 3;
        b.style.width = `${size}px`;
        b.style.height = `${size}px`;
        b.style.left = `${Math.random() * 100}%`;
        b.style.animationDuration = `${Math.random() * 15 + 10}s`;
        b.style.animationDelay = `${Math.random() * 5}s`;
        ocean.appendChild(b);
      }

      // 2. Language Support
      const urlParams = new URLSearchParams(window.location.search);
      let currentLang =
        urlParams.get("lang") || localStorage.getItem("siteLang") || "en";

      const translations = {
        en: {
          MainTitle: "Mission Briefing",
          IntroText:
            "Identify your targets in the zones below before deploying the scanner. Scroll down to the abyss.",
          SunlightLabel: "Sunlight",
          TwilightLabel: "Twilight",
          MidnightLabel: "Midnight",
          AbyssLabel: "The Abyss",
          "Sea Angel": "Sea Angel",
          "Megamouth Shark": "Megamouth Shark",
          Barreleye: "Barreleye",
          "Vampire Squid": "Vampire Squid",
          Blobfish: "Blobfish",
          "Atolla Jellyfish": "Atolla Jellyfish",
          Anglerfish: "Anglerfish",
          "Gulper Eel": "Gulper Eel",
          "Dumbo Octopus": "Dumbo Octopus",
          "Yeti Crab": "Yeti Crab",
          ZoneInfo: "ZONE CONTEXT",
          SurvivalStrategy: "SURVIVAL STRATEGY",
          BtnDeploy: "START AR SCAN",
        },
        my: {
          MainTitle: "Taklimat Misi",
          IntroText:
            "Kenal pasti sasaran anda di zon bawah sebelum menggunakan pengimbas. Skrol ke dasar abis.",
          SunlightLabel: "Cahaya Matahari",
          TwilightLabel: "Senja malap",
          MidnightLabel: "Tengah Malam",
          AbyssLabel: "Abis gelita",
          "Sea Angel": "Bidadari Laut",
          "Megamouth Shark": "Jerung Megamouth",
          Barreleye: "Ikan Barreleye",
          "Vampire Squid": "Sotong Vampire",
          Blobfish: "Ikan Blob",
          "Atolla Jellyfish": "Obor-obor Atolla",
          Anglerfish: "Ikan Angler",
          "Gulper Eel": "Belut Gulper",
          "Dumbo Octopus": "Sotong Dumbo",
          "Yeti Crab": "Ketam Yeti",
          ZoneInfo: "KONTEKS ZON",
          SurvivalStrategy: "STRATEGI KELANGSUNGAN HIDUP",
          BtnDeploy: "MULA IMBAS AR",
        },
      };

      const zoneData = {
        sunlight: {
          en: "Epipelagic Zone: The surface layer where sunlight is abundant, allowing photosynthesis and supporting 90% of marine life.",
          my: "Zon Epipelagik: Lapisan permukaan yang kaya dengan cahaya matahari, membolehkan fotosintesis dan menyokong 90% hidupan laut.",
        },
        twilight: {
          en: "Mesopelagic Zone: Faint light reaches here, but not enough for plants. Creatures often have large eyes and bioluminescent bodies.",
          my: "Zon Mesopelagik: Cahaya malap sampai ke sini, tetapi tidak cukup untuk tumbuhan. Haiwan sering mempunyai mata besar dan badan bercahaya.",
        },
        midnight: {
          en: "Bathypelagic Zone: Constant darkness and freezing temperatures. Life here depends on 'marine snow' falling from the surface.",
          my: "Zon Batipelagik: Kegelapan berterusan dan suhu sejuk beku. Hidupan di sini bergantung pada 'salji laut' yang jatuh dari permukaan.",
        },
        abyss: {
          en: "Abyssopelagic Zone: Extreme pressure and near-zero temperatures. This zone covers the vast, flat plains of the deep ocean floor.",
          my: "Zon Abisopelagik: Tekanan melampau dan suhu hampir sifar. Zon ini meliputi dataran luas di dasar lautan dalam.",
        },
      };

      const creatureScience = {
        Barreleye: {
          en: [
            "Transparent head allows it to look through its forehead to spot prey silhouettes.",
            "Tubular eyes are extremely sensitive to faint light.",
            "It mostly remains motionless to save energy while waiting for food.",
          ],
          my: [
            "Kepala lutsinar membolehkannya melihat melalui dahi untuk mengesan bayang mangsa.",
            "Mata tiub sangat sensitif terhadap cahaya yang sangat malap.",
            "Ia biasanya tidak bergerak untuk menjimatkan tenaga sambil menunggu makanan.",
          ],
        },
        Blobfish: {
          en: [
            "Gelatinous flesh is slightly less dense than water, allowing it to float without swimming.",
            "Lacks a swim bladder which would collapse under intense deep-sea pressure.",
            "It catches food simply by opening its mouth and letting edible matter float in.",
          ],
          my: [
            "Isi seperti jeli mempunyai ketumpatan sedikit rendah daripada air, membolehkannya terapung tanpa berenang.",
            "Tiada pundi renang yang akan hancur di bawah tekanan laut dalam yang kuat.",
            "Ia menangkap makanan hanya dengan membuka mulut dan membiarkan sisa makanan masuk.",
          ],
        },
        "Atolla Jellyfish": {
          en: [
            "Uses a 'Burglar Alarm' flash to attract larger predators that will eat its attacker.",
            "The deep red color appears black in the dark, providing perfect camouflage.",
            "It can propel itself rapidly to escape threats after flashing its lights.",
          ],
          my: [
            "Menggunakan kilatan 'Penggera Pencuri' untuk menarik pemangsa lebih besar bagi memakan penyerangnya.",
            "Warna merah pekat kelihatan hitam dalam kegelapan, memberikan penyamaran sempurna.",
            "Ia boleh memacu dirinya dengan pantas untuk melarikan diri selepas mengeluarkan cahaya.",
          ],
        },
        "Dumbo Octopus": {
          en: [
            "Deepest-living of all octopus species, found at depths up to 7,000 meters.",
            "Ear-like fins are used for flapping and graceful movement through the water.",
            "Instead of ink, it uses mucus to confuse predators, as ink is useless in pitch black.",
          ],
          my: [
            "Spesies sotong yang tinggal paling dalam, ditemui pada kedalaman sehingga 7,000 meter.",
            "Sirip seperti telinga digunakan untuk mengepak dan bergerak anggun dalam air.",
            "Bukannya dakwat, ia menggunakan lendir untuk mengelirukan pemangsa kerana dakwat tidak berguna dalam gelap gelita.",
          ],
        },
        "Gulper Eel": {
          en: [
            "Massive expandable jaw allows it to swallow prey much larger than itself.",
            "Its stomach can stretch to accommodate huge meals, as food is rare in the deep.",
            "The tip of its tail features a bioluminescent organ used as a fishing lure.",
          ],
          my: [
            "Rahang besar yang boleh mengembang membolehkannya menelan mangsa yang jauh lebih besar daripadanya.",
            "Perutnya boleh meregang untuk memuatkan makanan besar, kerana makanan jarang ditemui di laut dalam.",
            "Hujung ekornya mempunyai organ bercahaya yang digunakan sebagai umpan pancing.",
          ],
        },
        "Yeti Crab": {
          en: [
            "Hairy claws host colonies of bacteria, which the crab harvests and eats.",
            "Blind and relies on chemical sensors to find hydrothermal vents.",
            "Lives in extreme heat near vents while the surrounding water is near freezing.",
          ],
          my: [
            "Penyepit berbulu menempatkan koloni bakteria, yang dituai dan dimakan oleh ketam.",
            "Buta dan bergantung pada penderia kimia untuk mencari lubang hidroterma.",
            "Tinggal dalam haba melampau berhampiran lubang manakala air di sekelilingnya hampir beku.",
          ],
        },
        "Vampire Squid": {
          en: [
            "Uses sticky filaments to collect 'marine snow' (organic debris) instead of hunting.",
            "Can turn its body inside out to show spiky 'cirri' as a defensive shield.",
            "Produces glowing mucus from its arm tips to distract and blind predators.",
          ],
          my: [
            "Menggunakan filamen melekit untuk mengumpul 'salji laut' (sisa organik) dan bukannya memburu.",
            "Boleh menterbalikkan badannya untuk menunjukkan 'cirri' berduri sebagai perisai pertahanan.",
            "Menghasilkan lendir bercahaya dari hujung lengannya untuk mengalih perhatian dan membutakan pemangsa.",
          ],
        },
        "Megamouth Shark": {
          en: [
            "One of only three filter-feeding shark species in the world.",
            "Glowing lips act as a lure to attract swarms of tiny plankton and jellyfish.",
            "Its mouth can be up to 1.3 meters wide when fully opened.",
          ],
          my: [
            "Salah satu daripada hanya tiga spesies jerung pemakan penapis di dunia.",
            "Bibir bercahaya bertindak sebagai umpan untuk menarik kumpulan plankton kecil dan obor-obor.",
            "Mulutnya boleh mencapai lebar sehingga 1.3 meter apabila dibuka sepenuhnya.",
          ],
        },
        Anglerfish: {
          en: [
            "Females possess the iconic bioluminescent lure containing symbiotic bacteria.",
            "Males are much smaller and fuse physically to the female as a permanent parasite.",
            "The teeth are angled inwards to ensure prey cannot swim out of its mouth.",
          ],
          my: [
            "Betina mempunyai umpan bercahaya ikonik yang mengandungi bakteria simbiotik.",
            "Jantan jauh lebih kecil dan melekat secara fizikal pada betina sebagai parasit kekal.",
            "Gigi condong ke dalam untuk memastikan mangsa tidak boleh berenang keluar dari mulutnya.",
          ],
        },
        "Sea Angel": {
          en: [
            "Despite looking like a fairy, it is a fierce predator of 'Sea Butterflies'.",
            "Uses specialized hooks hidden in its head to pull prey from their shells.",
            "Transparent body helps it stay invisible to larger predators in clear water.",
          ],
          my: [
            "Walaupun kelihatan seperti pari-pari, ia adalah pemangsa ganas 'Rama-rama Laut'.",
            "Menggunakan cangkuk khas yang tersembunyi di kepalanya untuk menarik mangsa dari cangkerang.",
            "Badan lutsinar membantunya kekal halimunan kepada pemangsa yang lebih besar.",
          ],
        },
      };

      const imageMap = {
        Barreleye: "a.png",
        Blobfish: "b.png",
        "Atolla Jellyfish": "c.png",
        "Dumbo Octopus": "d.png",
        "Gulper Eel": "e.png",
        "Yeti Crab": "f.png",
        "Vampire Squid": "g.png",
        "Megamouth Shark": "h.png",
        Anglerfish: "i.png",
        "Sea Angel": "j.png",
      };

      function updatePageLanguage() {
        const isMy = currentLang === "ms" || currentLang === "my";
        document.getElementById("langSwitch").innerText = isMy
          ? "üåê MY"
          : "üåê EN";
        const t = translations[isMy ? "my" : "en"];

        // Update Static Text
        document.querySelectorAll("[data-key]").forEach((el) => {
          const key = el.getAttribute("data-key");
          if (t[key]) el.innerText = t[key];
        });

        // Update Button Text
        document.getElementById("btnDeploy").innerText = t.BtnDeploy;
      }

      document.getElementById("langSwitch").onclick = () => {
        currentLang = currentLang === "en" ? "my" : "en";
        localStorage.setItem("siteLang", currentLang);
        updatePageLanguage();
      };

      const modal = document.getElementById("infoModal");
      const content = modal.querySelector(".modal-content");
      const modalImg = document.getElementById("modalImg");
      const modalTitle = document.getElementById("modalTitle");
      const modalFacts = document.getElementById("modalFacts");
      const modalZone = document.getElementById("modalZone");
      const closeBtn = document.getElementById("closeModal");

      window.openCreature = (key, zone) => {
        const isMy = currentLang === "ms" || currentLang === "my";
        const t = translations[isMy ? "my" : "en"];
        // Adjusted path to assume this file is in ROOT
        modalImg.src = `../assets/images/${imageMap[key]}`;
        modalTitle.innerText = t[key] || key;
        modalZone.innerText = zoneData[zone][isMy ? "my" : "en"];
        modalFacts.innerHTML = creatureScience[key][isMy ? "my" : "en"]
          .map((f) => `<p class="pl-2 border-l-2 border-sky-500/50">${f}</p>`)
          .join("");
        modal.classList.remove("opacity-0", "pointer-events-none");
        content.classList.remove("scale-95");
        content.classList.add("scale-100");
      };

      closeBtn.onclick = () => {
        modal.classList.add("opacity-0", "pointer-events-none");
        content.classList.add("scale-95");
      };

      // BUTTON DEPLOY LOGIC
      document.getElementById("btnDeploy").addEventListener("click", () => {
        const sound = document.getElementById("clickSound");
        sound.play().catch(() => {});

        // Wait slightly for sound, then navigate
        setTimeout(() => {
          const instructionFile =
            currentLang === "ms" || currentLang === "my"
              ? "instructions-my.html"
              : "instructions-en.html";
          window.location.href = instructionFile;
        }, 300);
      });

      updatePageLanguage();
    </script>
  </body>
</html>
